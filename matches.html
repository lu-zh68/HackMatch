<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Matches - HackMatch</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <div class="bottom-nav-content">
      <a href="swipe.html" class="nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
        <span>Swipe</span>
      </a>
      <a href="matches.html" class="nav-item active">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        <span>Matches</span>
      </a>
      <a href="#" onclick="logout(); return false;" class="nav-item">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        <span>Profile</span>
      </a>
    </div>
  </nav>

  <div class="container">
    <h1 style="margin-bottom: 2rem;">Your Matches</h1>

    <div id="matches-container" class="matches-grid">
      <!-- Matches will be dynamically added here -->
    </div>

    <div id="empty-state" class="empty-state" style="display: none;">
      <div class="empty-state-icon">ðŸ’«</div>
      <h2>No matches yet</h2>
      <p>Keep swiping to find your perfect teammates!</p>
      <a href="swipe.html" class="btn btn-primary" style="margin-top: 1rem;">Find Teammates</a>
    </div>
  </div>

  <script src="sample-data.js"></script>
  <script src="app.js"></script>
  <script>
    // Check if user is logged in
    const currentUser = getCurrentUser();
    if (!currentUser) {
      window.location.href = 'index.html';
    }

    // Display user name
    document.getElementById('user-name').textContent = currentUser.name;

    // Get matches
    const matches = getUserMatches();

    // Render matches
    async function renderMatches() {
      const container = document.getElementById('matches-container');
      const emptyState = document.getElementById('empty-state');

      if (matches.length === 0) {
        container.style.display = 'none';
        emptyState.style.display = 'block';
        return;
      }

      container.innerHTML = '';

      for (const match of matches) {
        // Calculate match score
        const score = await calculateMatchScore(currentUser, match);

        const card = document.createElement('a');
        card.href = `chat.html?id=${match.id}`;
        card.className = 'match-card';

        const activityStatus = getActivityStatus(match.lastActive);
        const timeAgo = getTimeAgo(match.lastActive);

        card.innerHTML = `
          <div class="match-header">
            <div>
              <div class="match-name">${match.name}</div>
              <div style="color: var(--text-secondary); font-size: 0.9rem;">${match.role}</div>
            </div>
            <div class="match-score">${score}%</div>
          </div>

          <div style="margin: 0.75rem 0;">
            <div class="stat">
              <span class="status-dot ${activityStatus}"></span>
              <span style="font-size: 0.85rem; color: var(--text-secondary);">${timeAgo}</span>
            </div>
          </div>

          <div class="skills-list">
            ${match.skills.slice(0, 3).map(skill => `<span class="skill-tag" style="font-size: 0.85rem;">${skill}</span>`).join('')}
            ${match.skills.length > 3 ? `<span class="skill-tag" style="font-size: 0.85rem;">+${match.skills.length - 3}</span>` : ''}
          </div>

          <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); color: var(--primary); font-weight: 600; font-size: 0.9rem;">
            ðŸ’¬ Send message â†’
          </div>
        `;

        container.appendChild(card);
      }
    }

    // Initialize
    renderMatches();
  </script>
</body>
</html>
